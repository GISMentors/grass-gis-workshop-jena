Unit 30 - PyWPS LST region zones
================================

A last (fourth) version of the process will return for input region
and dates LST zones in vector format (:wikipedia:`GML`). The output
parameter is defined as ``ComplexOutput``, see lines :lcode:`26-29`.
Zones defined on lines :lcode:`85-88` are created by
:grasscmd:`r.recode` (:lcode:`92`). Than raster zones are convert to
vector by :grasscmd:`r.to.vect` on line :lcode:`99`. Finally vector
zones are exported into GML format on line :lcode:`106` by
:grasscmd:`v.out.ogr`. Response content is set on line :lcode:`112`.

Note that also class name (:lcode:`31`), process identifier
(:lcode:`33`), title (:lcode:`34`), abstract (:lcode:`39`) and version
(:lcode:`40`) needs to be updated.
          
.. literalinclude:: ../_static/scripts/modis_v4.py
   :language: python
   :emphasize-lines: 26-29,31,33,34,39,40,85-88,92,99,106,112

Sample process to download: `modis_v4.py
<../_static/scripts/modis_v4.py>`__
      
.. important:: Do not forget to import process as done in :ref:`Unit 27
   <process-import>` and restart demo PyWPS server.

Execute process:
      
http://localhost:5000/wps?request=Execute&service=WPS&identifier=modis-v4&version=1.0.0&datainputs=start=2023-03-01;end=2023-04-01;region=@xlink:href=http://localhost:5000/static/data/jena_boundary.gpkg

Compare with (output return as reference):

http://localhost:5000/wps?request=Execute&service=WPS&identifier=modis-v4&version=1.0.0&datainputs=start=2023-03-01;end=2023-04-01;region=@xlink:href=http://localhost:5000/static/data/jena_boundary.gpkg&responsedocument=output=@asReference=true

.. figure:: ../images/units/30/qgis-result.png
   :class: large
           
   Example of WPS process consumption in QGIS using WPS Client
   plugin. Install the plugin from `ZIP
   <https://github.com/OpenGeoLabs/qgis-wps-plugin/archive/refs/heads/master.zip>`__
   file.

----

.. note:: **It is the end (of the workshop), enjoy GRASS GIS (and your
          real life)! :-)**
